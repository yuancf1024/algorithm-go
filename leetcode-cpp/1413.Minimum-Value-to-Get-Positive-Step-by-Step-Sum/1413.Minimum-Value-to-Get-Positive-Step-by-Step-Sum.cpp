/**
 * @file 1413.Minimum-Value-to-Get-Positive-Step-by-Step-Sum.cpp
 * @author your name (you@domain.com)
 * @brief 
 * @version 0.1
 * @date 2022-08-09
 * 
 * @copyright Copyright (c) 2022
 * leetcode-1413.é€æ­¥æ±‚å’Œå¾—åˆ°æ­£æ•°çš„æœ€å°å€¼
 * 
ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsÂ ã€‚ä½ å¯ä»¥é€‰å®šä»»æ„çš„Â æ­£æ•° startValue ä½œä¸ºåˆå§‹å€¼ã€‚

ä½ éœ€è¦ä»å·¦åˆ°å³éå† numsÂ æ•°ç»„ï¼Œå¹¶å°† startValue ä¾æ¬¡ç´¯åŠ ä¸ŠÂ numsÂ æ•°ç»„ä¸­çš„å€¼ã€‚

è¯·ä½ åœ¨ç¡®ä¿ç´¯åŠ å’Œå§‹ç»ˆå¤§äºç­‰äº 1 çš„å‰æä¸‹ï¼Œ
é€‰å‡ºä¸€ä¸ªæœ€å°çš„Â æ­£æ•°Â ä½œä¸º startValue ã€‚

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šnums = [-3,2,-3,4,2]
è¾“å‡ºï¼š5
è§£é‡Šï¼šå¦‚æœä½ é€‰æ‹© startValue = 4ï¼Œåœ¨ç¬¬ä¸‰æ¬¡ç´¯åŠ æ—¶ï¼Œå’Œå°äº 1 ã€‚
                ç´¯åŠ æ±‚å’Œ
Â                startValue = 4 | startValue = 5 | nums
Â                  (4 -3 ) = 1  | (5 -3 ) = 2    |  -3
Â                  (1 +2 ) = 3  | (2 +2 ) = 4    |   2
Â                  (3 -3 ) = 0  | (4 -3 ) = 1    |  -3
Â                  (0 +4 ) = 4  | (1 +4 ) = 5    |   4
Â                  (4 +2 ) = 6  | (5 +2 ) = 7    |   2

ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼šnums = [1,2]
è¾“å‡ºï¼š1
è§£é‡Šï¼šæœ€å°çš„ startValue éœ€è¦æ˜¯æ­£æ•°ã€‚

ç¤ºä¾‹ 3ï¼š
è¾“å…¥ï¼šnums = [1,-2,-3]
è¾“å‡ºï¼š5
Â 
æç¤ºï¼š

1 <= nums.length <= 100
-100 <= nums[i] <= 100

 */

// æ¨¡æ‹Ÿ
class Solution {
public:
    int minStartValue(vector<int>& nums) {
        int n = nums.size();
        int x = 1;
        while (true) {
            
            vector<int> preSum(n, 0);
            preSum[0] = nums[0] + x;
            for (int i = 1; i < n; ++i) {
                preSum[i] = preSum[i - 1] + nums[i];
            }
            bool condition = true;
            for (auto i : preSum) {
                if (i < 1) { 
                    condition = false;
                    continue;
                }
            }
            if (condition == false) {
                x++;
                continue;
            } else {
                break;
            }
        }
    }
    return x;
};

// æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ
class Solution {
public:
    int minStartValue(vector<int>& nums) { 
        int accSum = 0, accSumMin = 0;
        for (int num : nums) {
            accSum += num;
            accSumMin = min(accSumMin, accSum);
        }
        return 1 - accSumMin;
    }
};

// æ–¹æ³•äºŒï¼šäºŒåˆ†æŸ¥æ‰¾
class Solution {
public:
    int minStartValue(vector<int>& nums) {
        int m = *min_element(nums.begin(), nums.end());
        if (m >= 0) {
            return 1;
        }

        int left = 1, right = -m * nums.size() + 1;
        while (left < right) {
            int medium = left + ((right - left) >> 1);
            if (valid(medium, nums)) {
                right = medium; // å³è¾¹ç•Œå·¦ç§»
            } else {
                left = medium + 1;
            }
        }
        return left; // leftä¸€å®šæ»¡è¶³è¦æ±‚
    }

    bool valid(int startValue, vector<int>& nums) {
        for (int num : nums) {
            startValue += num;
            if (startValue <= 0) {
                return false;
            }
        }
        return true;
    }
};

/**
 * @brief 
 * æ ¹æ®é¢˜æ„æš´åŠ›æ¨¡æ‹Ÿ.
 * é¦–å…ˆæ„é€ ä¸€ä¸ªå¤§å¾ªç¯ï¼Œä»¥ä¾¿äºé€’å¢startValueã€‚
 * å£°æ˜preSumæ•°ç»„ï¼Œå­˜å‚¨startValueç´¯åŠ numsæ•°ç»„çš„å’Œï¼›
 * éå†preSumï¼Œçœ‹æ˜¯å¦æœ‰å…ƒç´ å°äº1ï¼š
 * - å¦‚æœæœ‰å…ƒç´ å°äº1ï¼Œè¯´æ˜startValueè¿˜éœ€è¦ç´¯åŠ ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯éå†ï¼›
 * - å¦‚æœæ²¡æœ‰å…ƒç´ å°äº1ï¼Œé‚£ä¹ˆstartValueå³ä¸ºè¿”å›å€¼ï¼Œbreakå¾ªç¯ï¼Œè¿”å›ç»“æœã€‚
 * 

æ‰§è¡Œç”¨æ—¶ï¼š8 ms, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†11.39%çš„ç”¨æˆ·
å†…å­˜æ¶ˆè€—ï¼š10.8 MB, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†5.06%çš„ç”¨æˆ·
é€šè¿‡æµ‹è¯•ç”¨ä¾‹ï¼š
55 / 55

å¤æ‚åº¦åˆ†æï¼š
æ—¶é—´å¤æ‚åº¦: O() å› ä¸ºä¸ç¡®å®šstartValueæœ€ç»ˆåˆ°å¤šå°‘ï¼Œæ‰€ä»¥æ— æ³•ç¡®å®š
ç©ºé—´å¤æ‚åº¦: O(N)

leetcodeå®˜æ–¹é¢˜è§£ï¼š

æ–¹æ³•ä¸€ï¼šè´ªå¿ƒ  
æ€è·¯
è¦ä¿è¯æ‰€æœ‰çš„ç´¯åŠ å’Œ accSum æ»¡è¶³accSum + startValue â‰¥ 1ï¼Œ
åªéœ€ä¿è¯ç´¯åŠ å’Œçš„æœ€å°å€¼ accSumMin æ»¡è¶³ accSumMin+startValue â‰¥ 1ï¼Œ
é‚£ä¹ˆ startValue çš„æœ€å°å€¼å³å¯å– âˆ’accSumMin + 1ã€‚

ç¬‘å“­ğŸ˜‚: æˆ‘æœ€å¼€å§‹çš„æ€è·¯å°±æ˜¯è´ªå¿ƒï¼Œä½†æ˜¯æ²¡æœ‰å†™å‡ºæ¥ï¼Œäºæ˜¯å°±æš´åŠ›æ¨¡æ‹Ÿã€‚
æ²¡å†™å‡ºæ¥ï¼Œæ˜¯å› ä¸ºæ²¡æœ‰ååº”è¿‡æ¥ï¼šstartValueåº”è¯¥æ˜¯ 1- accSumMin

å¤æ‚åº¦åˆ†æ
æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„ nums çš„é•¿åº¦ã€‚
åªéœ€è¦éå†æ•°ç»„ä¸€æ¬¡ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚åªéœ€è¦ä½¿ç”¨å¸¸é‡ç©ºé—´ã€‚

æ‰§è¡Œç”¨æ—¶ï¼š0 ms, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ·
å†…å­˜æ¶ˆè€—ï¼š7.2 MB, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†23.73%çš„ç”¨æˆ·
é€šè¿‡æµ‹è¯•ç”¨ä¾‹ï¼š55 / 55


æ–¹æ³•äºŒï¼šäºŒåˆ†æŸ¥æ‰¾
æ€è·¯
å½“ nums æ‰€æœ‰å…ƒç´ å‡ä¸ºéè´Ÿæ•°æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿”å› 1ã€‚
å½“æœ‰è´Ÿæ•°æ—¶ï¼Œå¯ä»¥

å½“æŸä¸ªæ•°å­—æ»¡è¶³startValue çš„è¦æ±‚æ—¶ï¼Œæ¯”å®ƒå¤§çš„æ•°å­—è‚¯å®šä¹Ÿéƒ½æ»¡è¶³ï¼Œ
æ¯”å®ƒå°çš„æ•°å­—åˆ™ä¸ä¸€å®šèƒ½æ»¡è¶³ï¼Œå› æ­¤ startValue çš„æ€§è´¨å…·æœ‰å•è°ƒæ€§ï¼Œ
æ­¤é¢˜å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥è§£å†³ã€‚äºŒåˆ†æŸ¥æ‰¾çš„å·¦èµ·å§‹ç‚¹ä¸º 1ï¼Œ
å³èµ·å§‹ç‚¹å¯ä»¥è®¾ä¸º nums çš„æœ€å°å€¼çš„ç›¸åæ•°ä¹˜ä¸Šé•¿åº¦åå†åŠ  1ï¼Œ
è¿™æ ·å¯ä»¥ä¿è¯å³ç«¯ç‚¹ä¸€å®šæ»¡è¶³ startValue çš„è¦æ±‚ã€‚

åˆ¤æ–­æŸä¸ªæ•°å­—æ˜¯å¦æ»¡è¶³ startValue çš„è¦æ±‚æ—¶ï¼Œ
å¯ä»¥å°† nums çš„æ•°å­—é€æ­¥åŠ åˆ°è¿™ä¸ªæ•°å­—ä¸Šï¼Œåˆ¤æ–­æ˜¯å¦ä¸€ç›´ä¸ºæ­£å³å¯ã€‚

å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼šO(nÃ—log(mn))ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„ nums çš„é•¿åº¦ï¼Œ
m æ˜¯æ•°ç»„æœ€å°å€¼çš„ç»å¯¹å€¼ã€‚äºŒåˆ†æŸ¥æ‰¾çš„æ¬¡æ•°æ˜¯ O(log(mn))ï¼Œ
æ¯æ¬¡æ¶ˆè€— O(n)ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(1)O(1)ã€‚åªéœ€è¦ä½¿ç”¨å¸¸é‡ç©ºé—´ã€‚

æ‰§è¡Œç”¨æ—¶ï¼š0 ms, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ·
å†…å­˜æ¶ˆè€—ï¼š7.1 MB, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†83.54%çš„ç”¨æˆ·
é€šè¿‡æµ‹è¯•ç”¨ä¾‹ï¼š
55 / 55
 */